---
import Button from "@components/navigation/Button.astro";
import ItemFilter from "@components/navigation/ItemFilter.astro";
import FormattedDate from "@components/FormattedDate.astro";
import myHeroImage from "../../assets/aleto/Messenger_creation_7A34BA8D-CA35-40B2-B6C0-142B19B3887D.jpeg";
const {
  title,
  thumbnail,
  hero_buttons,
  intro,
  tag,
  filter,
  filters,
  filter_type,
  style,
  pubDate,
  base_url,
} = Astro.props;

const { slug } = Astro.params;
---

<div
  class={`hero relative overflow-hidden nebulix-parallax ${
    style.hero_surface || "surface-dark"
  } ${style.hero_class || ""}`}
  transition:name={`hero_${slug || Math.random()}`}
  style="min-height: 100vh;"
  id="header"
>
  <div class="media parallax w-full">
    <img
      src={myHeroImage.src}
      alt={title}
      loading="eager"
      class="w-full object-cover object-top"
    />
  </div>

  <div
    class="absolute inset-0 z-10 grid place-items-center bg-dark bg-opacity-20"
  >
    <div class="container-xl py-12 md:py-24">
      <div class="glass max-w-3xl p-8 md:p-12">
        {
          pubDate && (
            <span class="text-overline mb-4 block text-accent">
              <FormattedDate date={pubDate} />
            </span>
          )
        }
        <h1 class="title mb-6">
          {title}
        </h1>
        {
          intro && (
            <div class="subtitle balance py-4 text-white/90"> {intro}</div>
          )
        }

        {
          tag && (
            <ItemFilter
              filters={tag}
              className="mt-6 justify-start"
              links={true}
              {base_url}
            />
          )
        }

        {
          filters && (
            <ItemFilter
              filters={filters}
              className="mt-6"
              links={true}
              active={filter}
              type={filter_type}
              {base_url}
            />
          )
        }
        {
          hero_buttons && hero_buttons.length > 0 && (
            <div class="flex flex-wrap gap-6 py-8">
              {hero_buttons.map((btn) => (
                <Button {...btn} />
              ))}
            </div>
          )
        }
        <slot />
      </div>
    </div>
  </div>
</div>

<style>
  .hero {
    /* Remove min-height on mobile, only apply on larger screens */
  }
  .media {
    @screen sm {
      max-height: calc(100svh - 4rem);
    }
  }
</style>
